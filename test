import yaml
from collections import OrderedDict
import sys
import os

def sort_yaml_dict(obj):
    if isinstance(obj, dict):
        return OrderedDict(sorted((k, sort_yaml_dict(v)) for k, v in obj.items()))
    elif isinstance(obj, list):
        return [sort_yaml_dict(item) for item in obj]
    else:
        return obj

def sort_yaml_file(input_path, output_path):
    with open(input_path, 'r') as f:
        data = yaml.safe_load(f)

    sorted_data = sort_yaml_dict(data)

    with open(output_path, 'w') as f:
        yaml.dump(sorted_data, f, sort_keys=False)

if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("Usage: python sort_yaml.py <input_file.yaml> <output_file.yaml>")
    else:
        input_file = sys.argv[1]
        output_file = sys.argv[2]
        sort_yaml_file(input_file, output_file)
        print(f"Sorted YAML written to {output_file}")